(function(){var a,b=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},c={}.hasOwnProperty;a=new Marionette.Application,a.addRegions({infoRegion:"#profile-info-container",editRegion:"#edit-form-container"}),a.profileModel=Backbone.Model.extend({defaults:JSON.parse($("#user-model").text())}),a.model=new a.profileModel,a.start(),a.module("ProfileFormApp",function(c){var d,e;e=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template="#edit-form-tmpl",c.prototype.events={"click .save-button":"send","click .cancell-button":"cancell"},c.prototype.ui={userName:"[name=userName]",userEmail:"[name=userEmail]",password:"[name=password]",repeatPassword:"[name=repeatPassword]",siteUrl:"[name=siteUrl]",userPhone:"[name=userPhone]",userBirthday:"[name=userBirthday]",userGender:"[name=userGender]",userAbout:"[name=userAbout]",userSkill:"[name=userSkill]"},c.prototype.send=function(a){a.preventDefault(),this.onBeforeSend(),this.trigger("sendForm",{data:this.ui})},c.prototype.cancell=function(){$(".alert, .error-message").remove()},c.prototype.onBeforeSend=function(){$(".save-button").addClass("hide"),$(".sk-fading-circle").removeClass("hide"),$(".alert, .error-message").remove()},c}(Marionette.ItemView),d=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.initialize=function(a){return a.region.show(a.view),this.model=a.model,this.listenTo(a.view,"sendForm",function(a){return function(b){a.sendForm(b.data)}}(this))},c.prototype.sendForm=function(a){var b,c,d;b=this,c=a.userBirthday.val().split("-"),d={_token:this.model.get("_csrf"),userName:a.userName.val(),userEmail:a.userEmail.val(),password:{first:a.password.val(),second:a.repeatPassword.val()},siteUrl:a.siteUrl.val(),userPhone:a.userPhone.val(),userBirthday:{year:c[0],month:c[1],day:c[2]},userGender:_.find(a.userGender,{checked:!0}).value,userAbout:a.userAbout.val(),userSkill:a.userSkill.val()},$.ajax({type:"POST",url:"process-form",dataType:"json",data:{user:d},success:function(a){var c;$(".save-button").removeClass("hide"),$(".sk-fading-circle").addClass("hide"),c=_.template($("#messages-tmpl").html())({message:"Profile Updated!",type:"alert alert-success"}),$(".form-title").after(c),b.model.set({userName:a["[userName]"].value,userEmail:a["[userEmail]"].value,siteUrl:a["[siteUrl]"].value,userPhone:a["[userPhone]"].value,userBirthday:a["[userBirthday][year]"].value+"-"+a["[userBirthday][month]"].value+"-"+a["[userBirthday][day]"].value,userGender:a["[userGender]"].value,userAbout:a["[userAbout]"].value,userSkill:a["[userSkill]"].value})},error:function(a,b){var c,d;if($(".save-button").removeClass("hide"),$(".sk-fading-circle").addClass("hide"),0===a.status)window.alert("Not connect.\n Verify Network.");else{if(400===a.status)return c=JSON.parse(a.responseText),d=_.template($("#messages-tmpl").html())({message:c.message,type:"alert alert-danger"}),$(".form-title").after(d),void _.each(c.errors.children,function(a,b){var c;return a.errors?(c=_.template($("#validate-errors-tmpl").html())({errors:a.errors}),void("userGender"===b?$("#"+b).append(c):$("#"+b).after(c))):a.children&&(a.children.year&&a.children.year.errors&&(c=_.template($("#validate-errors-tmpl").html())({errors:a.children.year.errors}),$("#userBirthday").after(c)),a.children.month&&a.children.month.errors&&(c=_.template($("#validate-errors-tmpl").html())({errors:a.children.month.errors}),$("#userBirthday").after(c)),a.children.day&&a.children.day.errors&&(c=_.template($("#validate-errors-tmpl").html())({errors:a.children.day.errors}),$("#userBirthday").after(c)),a.children.first&&a.children.first.errors&&(c=_.template($("#validate-errors-tmpl").html())({errors:a.children.first.errors}),$("#password").after(c)),a.children.second&&a.children.second.errors)?(c=_.template($("#validate-errors-tmpl").html())({errors:a.children.second.errors}),$("#repeatPassword").after(c)):void 0});404===a.status?window.alert("Requested page not found. [404]"):500===a.status?window.alert("Internal Server Error [500]."):"parsererror"===b?window.alert("parsererror"):"timeout"===b?window.alert("Time out error."):"abort"===b?window.alert("Ajax request aborted."):window.alert("Uncaught Error.\n"+a.responseText)}}})},c}(Marionette.Controller),c.addInitializer(function(){var b;b=new e({model:a.model}),this.controller=new d({region:a.editRegion,model:a.model,view:b})})}),a.module("ProfileInfoApp",function(c){var d,e;e=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template="#profile-info-tmpl",c.prototype.initialize=function(a){this.listenTo(a.model,"change",function(a){return function(){a.render()}}(this))},c}(Marionette.ItemView),d=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.initialize=function(a){a.region.show(a.view)},c}(Marionette.Controller),c.addInitializer(function(){var b;b=new e({model:a.model}),this.controller=new d({region:a.infoRegion,model:a.model,view:b})})}),$(document).on("ready",function(){var a,b,c;return $(".equal-height").responsiveEqualHeightGrid(),$(".datepicker").bootstrapMaterialDatePicker({weekStart:0,time:!1}),a=document.getElementById("password"),b=document.getElementById("repeatPassword"),c=function(){a.value!==b.value?b.setCustomValidity("Passwords Don't Match"):b.setCustomValidity("")},$(a).on("change",function(){c()}),$(b).on("change",function(){c()})})}).call(this);